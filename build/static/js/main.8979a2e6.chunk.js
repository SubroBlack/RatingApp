(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{121:function(e,t,a){e.exports=a(186)},130:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),i=a.n(c),o=a(8),u=a(28),l=(a(130),a(11)),s=a(4),m=a.n(s),d=a(7),p=a(22),f=a.n(p),b=function(){var e=window.localStorage.getItem("loggedRatingAppAdmin"),t=JSON.parse(e);if(t)return t;var a=window.localStorage.getItem("loggedRatingAppUser"),n=JSON.parse(a);return n||null},v=b,g=function(){var e=function(){var e=b();return e?"bearer ".concat(e.token):null}();return null===e?null:{headers:{auth:e}}},h="/api/items",E={getAll:function(){var e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g(),e.next=3,f.a.get(h,t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getItem:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g(),e.next=3,f.a.get("".concat(h,"/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addItem:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=v(),console.log("New Item to be sent: ",t),"admin"===a.role){e.next=5;break}throw console.log("WOOPsss, it got caught: ",a.role),new Error("Only Admin can Add Items");case 5:return n=g(),e.next=8,f.a.post(h,t,n);case 8:return r=e.sent,console.log("New Item Added: ",r.data),e.abrupt("return",r.data);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editItem:function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("admin"===(n=v()).role){e.next=4;break}throw console.log("WOOPsss, it got caught: ",n.role),new Error("Only Admin can Add Items");case 4:return r=g(),e.next=7,f.a.put("".concat(h,"/").concat(t),a,r);case 7:return c=e.sent,e.abrupt("return",c.data);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),rateItem:function(){var e=Object(d.a)(m.a.mark((function e(t,a){var n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("user"===(n=v()).role){e.next=4;break}throw console.log("WOOPsss, it got caught: ",n.role),new Error("Only User can Rate Items");case 4:return r=g(),e.next=7,f.a.put("".concat(h,"/rate/").concat(t),a,r);case 7:return c=e.sent,e.abrupt("return",c.data);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),removeItem:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("admin"===(a=v()).role){e.next=4;break}throw console.log("WOOPsss, it got caught: ",a.role),new Error("Only Admin can Delete Items");case 4:return n=g(),e.next=7,f.a.delete("".concat(h,"/").concat(t),n);case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=0,w="",j=function(e){return{type:"NOTIFY",data:e}},y=function(e,t){return function(){var a=Object(d.a)(m.a.mark((function a(n){return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n(j(e)),(O+=1)>1&&clearTimeout(w),w=setTimeout((function(){n((O=0,{type:"CLEAR",data:""}))}),1e3*t);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTIFY":case"CLEAR":return t.data;default:return e}},k=function(){return function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.getAll();case 2:a=e.sent,t({type:"ITEMS",data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.getItem(e);case 2:n=t.sent,console.log("Single Item fetched: ",n),a({type:"GET_ITEM",data:n});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},C=function(e){return function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.addItem(e);case 2:n=t.sent,a({type:"NEW",data:n}),a(y({data:"".concat(n.name," added to collection"),category:"success"},5));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},N=function(e,t){return function(){var a=Object(d.a)(m.a.mark((function a(n){var r;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.editItem(e,t);case 2:r=a.sent,n({type:"EDITED",data:r}),n(y({data:"".concat(r.name," updated in collection"),category:"success"},5));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},A=function(e){return function(){var t=Object(d.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.removeItem(e.id);case 2:a({type:"DELETE",data:e}),a(y({data:"".concat(e.name," removed from collection"),category:"success"},5));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ITEMS":case"GET_ITEM":return t.data;case"NEW":return e.concat(t.data);case"EDITED":var a=e.filter((function(e){return e.id!==t.data.id}));return a.concat(t.data);case"DELETE":return e.filter((function(e){return e.id!==t.data.id}));default:return e}},I=a(10),T=a(243),R=a(224),U=a(220),L=a(29),z=a(225),B=a(226),W=a(98),q=a.n(W),P=a(99),G=a(242),F={.5:"Completely Useless",.75:"Useless",1:"Almost Useless",1.25:"Disappointing",1.5:"Poor",1.75:"Very Bad",2:"Bad",2.25:"Not So Bad",2.5:"Barely Fine",2.75:"Fine",3:"Good",3.25:"Very Good",3.5:"Cool",3.75:"Very Cool",4:"Super",4.25:"Great",4.5:"Awesome",4.75:"Excellent",5:"Amazing"},M=Object(U.a)({root:{display:"flex",width:"90vw",margin:"auto",justifyContent:"center"},fixedRate:{display:"block",justifyContent:"center",textAlign:"center"},commentSection:{position:"relative",marginTop:"auto",marginBottom:"auto"}}),_=function(e){var t=e.item,a=r.a.useState(0),n=Object(I.a)(a,2),c=n[0],i=n[1],u=r.a.useState(-1),l=Object(I.a)(u,2),s=(l[0],l[1]),p=M(),f=Object(o.b)(),b=Object(o.c)((function(e){return e.logged})),v=function(e){var a,n,r={};r.rate=e,r.comment="",f((a=t.id,n=r,function(){var e=Object(d.a)(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.rateItem(a,n);case 2:r=e.sent,t({type:"EDITED",data:r}),t(y({data:"Thank You for your feedback",category:"success"},3.5));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),i(0)};if(b&&"admin"===b.role&&t.review){var g=0;Array.from(t.review,(function(e){return g+=e.rate}));var h=g/t.review.length;t.rate=h}return r.a.createElement("div",{className:p.root},b&&"admin"===b.role?r.a.createElement("div",{className:p.fixedRate},r.a.createElement(G.a,{name:"size-large",value:t.rate,precision:.25,size:"large",disabled:!0}),r.a.createElement("br",null),r.a.createElement("div",null,F[t.rate])):r.a.createElement(G.a,{name:"size-large",value:c,precision:.5,size:"large",onChange:function(e,t){i(t),v(t)},onChangeActive:function(e,t){s(t)}}))},J=Object(P.autoPlay)(q.a),Y=Object(U.a)((function(e){return{root:{width:"100%",flexGrow:1},header:{textAlign:"center"},imgContainer:{width:"100%",paddingTop:"0.5vmin"},img:{display:"flex",margin:"auto",height:"70vh",width:"auto",maxWidth:"90vw",overflow:"hidden"},stepper:{backgroundColor:"#282c34"},stepperLabel:{color:"white"}}})),V=function(e){var t=e.items,a=e.open,c=Y(),i=Object(L.a)(),o=Object(n.useState)(0),u=Object(I.a)(o,2),l=u[0],s=u[1],m=t.length;return r.a.createElement("div",{className:c.root},r.a.createElement(J,{axis:"rtl"===i.direction?"x-reverse":"x",index:l,onChangeIndex:function(e){s(e)},enableMouseEvents:!0},t.map((function(e,n){return r.a.createElement("div",{className:c.imgContainer,key:n,onClick:function(){return a(t[l])}},Math.abs(l-n)<=2?r.a.createElement("img",{className:c.img,src:"/api/items/image/"+e.filename,alt:e.name}):null)}))),r.a.createElement("div",{className:c.header},r.a.createElement("div",{onClick:function(){return a(t[l])}},t[l].name),r.a.createElement(_,{item:t[l]})),r.a.createElement(T.a,{steps:m,className:c.stepper,position:"static",variant:"dots",activeStep:l,nextButton:r.a.createElement(R.a,{className:c.stepperLabel,size:"small",onClick:function(){s((function(e){return e+1}))},disabled:l===m-1},"Next","rtl"===i.direction?r.a.createElement(z.a,null):r.a.createElement(B.a,null)),backButton:r.a.createElement(R.a,{className:c.stepperLabel,size:"small",onClick:function(){s((function(e){return e-1}))},disabled:0===l},"rtl"===i.direction?r.a.createElement(B.a,null):r.a.createElement(z.a,null),"Back")}))},H=function(){var e=Object(l.f)(),t=Object(o.b)(),a=Object(o.c)((function(e){return e.logged}));Object(n.useEffect)((function(){t(k())}),[a,t]);var c=Object(o.c)((function(e){return e.items}));console.log("Items: ",c);var i=function(t){"admin"===a.role?e.push("/item/".concat(t.id)):console.log("Not Authorized")};return r.a.createElement("div",null,c.length<1?null:r.a.createElement(V,{items:c,open:i}))},K=a(105),Q=a(3),X=a(227),Z=a(228),$=a(244),ee=a(229),te=a(230),ae=a(231),ne=a(232),re=a(108),ce=a.n(re),ie=a(106),oe=a.n(ie),ue=a(107),le=a.n(ue),se=a(61),me=a.n(se),de=Object(U.a)((function(e){return{root:{maxWidth:"90vmin",margin:"auto",marginBottom:"4%"},imgContainer:{display:"flex",backgroundColor:"#282c34"},media:{height:"50vmin",margin:"auto"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:"#282c34"},fixedRate:{display:"block",justifyContent:"center",textAlign:"center",borderStyle:"solid",borderWidth:"3px",marginBottom:"2%",paddingTop:"1%",paddingBottom:"1%"},review:{display:"flex"},rates:{maxWidth:"40%"},comment:{width:"60%",marginLeft:"auto",textAlign:"center"}}})),pe=function(){var e=de(),t=r.a.useState(!1),a=Object(I.a)(t,2),c=a[0],i=a[1],u=Object(o.b)(),s=Object(o.c)((function(e){return e.logged})),p=Object(l.f)(),f=Object(l.g)().id;Object(n.useEffect)((function(){u(S(f))}),[s,f,u]);var b=Object(o.c)((function(e){return e.items}));if(!b||b.length<1)return null;var v=b[0],g=function(){p.push("/edit/".concat(v.id))},h=function(){var e=Object(d.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(A(v)),window.history.back();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){i(!c)};if(s&&"admin"===s.role&&v.review){var O=0;Array.from(v.review,(function(e){return O+=e.rate}));var w=O/v.review.length;v.rate=w}var j=new Date(Date.parse(v.posted)).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});console.log("Item: ",v);return r.a.createElement("div",null,r.a.createElement(X.a,{className:e.root,raised:!0},r.a.createElement(Z.a,{avatar:r.a.createElement($.a,{"aria-label":"recipe",className:e.avatar},v.name[0]),action:r.a.createElement(ee.a,{"aria-label":"close",onClick:function(){window.history.back()}},r.a.createElement(oe.a,null)),title:v.name,subheader:j}),r.a.createElement(te.a,null,v.category),r.a.createElement("div",{className:e.imgContainer},r.a.createElement("img",{className:e.media,alt:v.filename,src:"/api/items/image/"+v.filename})),r.a.createElement(te.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.fixedRate},"Average Rating",r.a.createElement("br",null),r.a.createElement(G.a,{name:"size-large",value:v.rate,precision:.25,size:"large",disabled:!0})),v.description)),r.a.createElement(ae.a,{disableSpacing:!0},r.a.createElement(ee.a,{color:"inherit",onClick:g,"aria-label":"Edit"},r.a.createElement(le.a,null)),r.a.createElement(ee.a,{color:"secondary",onClick:h,"aria-label":"Delete"},r.a.createElement(me.a,null)),r.a.createElement(ee.a,{className:Object(Q.a)(e.expand,Object(K.a)({},e.expandOpen,c)),color:"inherit",onClick:E,"aria-expanded":c,"aria-label":"show more"},r.a.createElement(ce.a,null))),r.a.createElement(ne.a,{in:c,timeout:"auto",unmountOnExit:!0},r.a.createElement(te.a,null,v.review?r.a.createElement(r.a.Fragment,null,v.review.map((function(t,a){return r.a.createElement("div",{key:a,className:e.review},r.a.createElement("span",{className:e.rates},r.a.createElement(G.a,{name:"size-medium",value:t.rate,precision:.5,size:"medium",disabled:!0})),r.a.createElement("span",{className:e.comment},t.comment?t.comment:null))}))):null))))},fe=(a(185),{login:function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),adminLogin:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g(),e.next=3,f.a.post("/api/login/admin/",t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),be=function(e){return{type:"SET_LOGGED",user:e}},ve=function(e,t){return function(){var a=Object(d.a)(m.a.mark((function a(n){var r;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fe.login({email:e,password:t});case 3:return r=a.sent,window.localStorage.setItem("loggedRatingAppUser",JSON.stringify(r)),a.next=7,n(be(r));case 7:return a.next=9,n(y({data:"Welcome",category:"success"},5));case 9:a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0),console.log(a.t0);case 14:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()},ge=function(){return function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.localStorage.removeItem("loggedRatingAppAdmin"),window.localStorage.removeItem("loggedRatingAppUser"),e.next=4,v();case 4:return a=e.sent,e.next=7,t(be(a));case 7:return e.next=9,t(y({data:"See Ya!",category:"success"},5));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},he=function(e){return function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fe.adminLogin({adminPin:e});case 3:return n=t.sent,window.localStorage.setItem("loggedRatingAppAdmin",JSON.stringify(n)),t.next=7,a(y({data:"Admin mode",category:"success"},5));case 7:return t.next=9,a(be(n));case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},Ee=function(){return function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.localStorage.removeItem("loggedRatingAppAdmin"),e.next=3,v();case 3:return a=e.sent,e.next=6,t(y({data:"User mode",category:"success"},5));case 6:return e.next=8,t(be(a));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOGGED":case"CLEAR_LOGGED":return t.user;default:return e}},we=a(240),je=Object(U.a)({root:{borderStyle:"solid",borderRadius:"1%",borderWidth:"4px",margin:"2%",paddingTop:"2%",paddingBottom:"2%"},header:{textAlign:"center"},form:{display:"grid",width:"25vmax",margin:"auto"}}),ye=function(){var e=Object(n.useState)(""),t=Object(I.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),u=Object(I.a)(i,2),s=u[0],p=u[1],f=je(),b=Object(o.b)(),v=Object(l.f)(),g=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,b(ve(a,s));case 3:c(""),p(""),v.push("/");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:f.root},r.a.createElement("h3",{className:f.header},"Login"),r.a.createElement("form",{onSubmit:g,className:f.form},r.a.createElement(we.a,{required:!0,id:"outlined-required",label:"Email",name:"email",value:a,onChange:function(e){var t=e.target;return c(t.value)},variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(we.a,{required:!0,id:"outlined-password-input",label:"Password",name:"password",type:"password",value:s,onChange:function(e){var t=e.target;return p(t.value)},variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(R.a,{type:"submit"},"Submit"),r.a.createElement("br",null),r.a.createElement(R.a,{onClick:function(e){e.preventDefault(),v.push("/")}},"Cancel")))},xe=a(233),ke=Object(U.a)({root:{borderStyle:"solid",borderRadius:"1%",borderWidth:"4px",margin:"2%",paddingTop:"2%",paddingBottom:"2%"},header:{textAlign:"center"},form:{display:"grid",width:"25vmax",margin:"auto"},image:{width:"25vmax",height:"auto",alignSelf:"center",justifyself:"center"}}),Se=function(){var e=Object(n.useState)(""),t=Object(I.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),u=Object(I.a)(i,2),s=u[0],p=u[1],f=Object(n.useState)(""),b=Object(I.a)(f,2),v=b[0],g=b[1],h=Object(n.useState)(""),E=Object(I.a)(h,2),O=E[0],w=E[1],j=Object(n.useState)({}),y=Object(I.a)(j,2),x=y[0],k=y[1],S=ke(),N=Object(o.b)(),A=Object(o.c)((function(e){return e.logged})),D=Object(l.f)();if(!A)return r.a.createElement("h5",null,"Sign In");if("admin"!==A.role)return r.a.createElement("h5",null,"Sign In to Admin mode");var T=function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=new FormData).append("name",a),n.append("category",s),n.append("description",v),n.append("file",x),e.next=8,N(C(n));case 8:c(""),p(""),g(""),k({}),w(""),D.push("/");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:S.root},r.a.createElement("h3",{className:S.header},"Add New Service"),r.a.createElement("form",{onSubmit:T,className:S.form},r.a.createElement(we.a,{required:!0,id:"outlined-required",label:"Title",name:"name",value:a,onChange:function(e){var t=e.target;return c(t.value)},variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(we.a,{required:!0,id:"outlined-required",name:"category",label:"Category",value:s,onChange:function(e){var t=e.target;return p(t.value)},variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(we.a,{id:"outlined-multiline-flexible",name:"description",label:"Description",value:v,onChange:function(e){var t=e.target;return g(t.value)},variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(xe.a,{id:"raised-button-file",type:"file",name:"image",color:"primary",onChange:function(e){w(URL.createObjectURL(e.target.files[0])),k(e.target.files[0])}}),r.a.createElement("br",null),O.trim()?r.a.createElement("img",{src:O.trim()?O:null,alt:"upload",className:S.image}):null,r.a.createElement("br",null),r.a.createElement(R.a,{type:"submit",color:"primary"},"Submit"),r.a.createElement("br",null),r.a.createElement(R.a,{onClick:function(e){e.preventDefault(),D.push("/dashboard")},color:"secondary"},"Cancel")),r.a.createElement("br",null))},Ce={newUser:function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v()){e.next=4;break}throw console.log("WOOPsss, it got caught: ",t),new Error("Already Signed In");case 4:return e.next=6,f.a.post("/api/user",t);case 6:return a=e.sent,e.abrupt("return",a.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUser:function(){var e=Object(d.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g(),e.next=3,f.a.get("/api/user",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),editUser:function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g(),e.next=3,f.a.post("".concat("/api/user","/edit"),t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteUser:function(){var e=Object(d.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("admin"===(t=v()).role){e.next=4;break}throw console.log("WOOPsss, it got caught",t.role),new Error("UnAuthorized Action");case 4:return a=g(),e.next=7,f.a.delete("/api/user",a);case 7:return n=e.sent,console.log("User Deleted",n.data),e.abrupt("return",n.data);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Ne=function(){return function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce.getUser();case 2:a=e.sent,t({type:"SET_USER",data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ae=function(e){return function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ce.newUser(e);case 2:n=t.sent,a({type:"SET_USER",data:n}),a(y({data:"Welcome ".concat(n.name),category:"success"},5));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},De=function(e){return function(){var t=Object(d.a)(m.a.mark((function t(a){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ce.editUser(e);case 2:n=t.sent,a({type:"SET_USER",data:n}),a(y({data:"".concat(n.name," updated"),category:"success"},5));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.data;case"DELETE":return null;default:return e}},Te=Object(U.a)((function(e){return{root:{maxWidth:"95vmin",margin:"auto",marginBottom:"4%",padding:"1.5%",display:"flex"},media:{maxWidth:"55%",margin:"0%",padding:"0%"},img:{height:"30vmin",marginRight:"auto"},content:{width:"40%",marginLeft:"auto"},info:{display:"flex"}}})),Re=function(e){var t=e.item,a=Te(),n=Object(o.c)((function(e){return e.logged})),c=Object(l.f)();if(!t)return null;var i=function(){c.push("/item/".concat(t.id))};if(n&&"admin"===n.role&&t.review){var u=0;Array.from(t.review,(function(e){return u+=e.rate}));var s=u/t.review.length;t.rate=s}var m=new Date(Date.parse(t.posted)).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return r.a.createElement("div",null,r.a.createElement(X.a,{className:a.root,raised:!0,key:t.id,onClick:i},r.a.createElement("span",{className:a.media},r.a.createElement("img",{className:a.img,alt:t.filename,src:"/api/items/image/"+t.filename})),r.a.createElement("span",{className:a.content},r.a.createElement(G.a,{name:"size-medium",value:t.rate,precision:.25,size:"medium",disabled:!0,className:a.info}),r.a.createElement("span",{className:a.info},t.name,r.a.createElement("br",null),m,r.a.createElement("br",null),"Category: ",t.category,r.a.createElement("br",null),"Total Reviews: ",t.review?t.review.length:null))))},Ue=a(235),Le=a(110),ze=a.n(Le),Be=a(109),We=a.n(Be),qe=Object(U.a)((function(e){return{root:{maxWidth:"95vmin",margin:"auto"},buttons:{marginLeft:"auto"}}})),Pe=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.logged})),a=qe();Object(n.useEffect)((function(){e(Ne())}),[e,t]),Object(n.useEffect)((function(){e(k())}),[t,e]);var c=Object(l.f)(),i=Object(o.c)((function(e){return e.user})),u=Object(o.c)((function(e){return e.items}));if(console.log("Dashboard user: ",i),!i)return null;return r.a.createElement("div",{className:a.root},r.a.createElement(Ue.a,null,r.a.createElement(ae.a,{disableSpacing:!0},r.a.createElement("h3",null,i.name,"'s DashBoard"),r.a.createElement("span",{className:a.buttons},r.a.createElement(ee.a,{color:"inherit",onClick:function(e){e.preventDefault(),c.push("/addItem")},"aria-label":"Add an Item"},r.a.createElement(We.a,null)),r.a.createElement(ee.a,{color:"inherit",onClick:function(e){e.preventDefault(),c.push("/editUser")},"aria-label":"Edit"},r.a.createElement(ze.a,null)),r.a.createElement(ee.a,{color:"secondary",onClick:function(t){t.preventDefault(),e(function(e){return function(){var t=Object(d.a)(m.a.mark((function t(a){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ce.deleteUser();case 2:a({type:"DELETE",data:e}),a(y({data:"CIAO ".concat(e.name),category:"success"},3.5));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(i)),e(ge()),c.push("/")},"aria-label":"Delete"},r.a.createElement(me.a,null))))),u?u.map((function(e,t){return r.a.createElement(Re,{key:t,item:e})})):null)},Ge=Object(U.a)({root:{borderStyle:"solid",borderRadius:"1%",borderWidth:"4px",margin:"2%",paddingTop:"2%",paddingBottom:"2%"},header:{textAlign:"center"},form:{display:"grid",width:"25vmax",margin:"auto"},image:{width:"25vmax",height:"auto",alignSelf:"center",justifyself:"center"}}),Fe=function(){var e=Object(n.useState)(""),t=Object(I.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),u=Object(I.a)(i,2),s=u[0],p=u[1],f=Object(n.useState)(""),b=Object(I.a)(f,2),v=b[0],g=b[1],h=Ge(),E=Object(l.f)(),O=Object(l.g)().id,w=Object(o.b)(),j=Object(o.c)((function(e){return e.logged}));Object(n.useEffect)((function(){w(S(O))}),[w,O,j]);var y=Object(o.c)((function(e){return e.items}))[0];if(!j)return r.a.createElement("h5",null,"Sign In");if("admin"!==j.role)return r.a.createElement("h5",null,"Sign In to Admin mode");if(!y)return null;console.log("edit item form: ",y);var x=function(){var e=Object(d.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={name:""===a?y.name:a,category:""===s?y.category:s,description:""===v?y.description:v},e.next=4,w(N(y.id,n));case 4:c(""),p(""),g(""),E.push("/");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:h.root},r.a.createElement("h3",{className:h.header},"Editing ",y.name),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:x,className:h.form},r.a.createElement(we.a,{required:!0,id:"outlined-required",label:"Title",name:"name",value:a,onChange:function(e){var t=e.target;return c(t.value)},variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(we.a,{required:!0,id:"outlined-required",name:"category",label:"Category",value:s,onChange:function(e){var t=e.target;return p(t.value)},variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(we.a,{id:"outlined-multiline-flexible",rowsMax:"4",name:"description",label:"Description",value:v,onChange:function(e){var t=e.target;return g(t.value)},variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(R.a,{type:"submit",color:"primary"},"Submit"),r.a.createElement("br",null),r.a.createElement(R.a,{onClick:function(e){e.preventDefault(),E.push("/dashboard")},color:"secondary"},"Cancel")),r.a.createElement("br",null))},Me=Object(U.a)({root:{borderStyle:"solid",borderRadius:"1%",borderWidth:"4px",margin:"2%",paddingTop:"2%",paddingBottom:"2%"},header:{textAlign:"center"},form:{display:"grid",width:"25vmax",margin:"auto"}}),_e=function(){var e=Object(n.useState)(""),t=Object(I.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),u=Object(I.a)(i,2),s=u[0],p=u[1],f=Object(n.useState)(""),b=Object(I.a)(f,2),v=b[0],g=b[1],h=Object(n.useState)(""),E=Object(I.a)(h,2),O=E[0],w=E[1],j=Me(),y=Object(o.b)(),x=Object(o.c)((function(e){return e.logged})),k=Object(l.f)(),S=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,y(Ae({name:a,email:s,password:v,adminPin:O}));case 3:c(""),p(""),g(""),w(""),k.push("/");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null!==x?null:r.a.createElement("div",{className:j.root},r.a.createElement("h3",{className:j.header},"Join Us!!!"),r.a.createElement("form",{onSubmit:S,className:j.form},r.a.createElement(we.a,{required:!0,id:"outlined-required",label:"Name",name:"name",value:a,onChange:function(e){var t=e.target;return c(t.value)},variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(we.a,{required:!0,id:"outlined-required",label:"Email",name:"email",value:s,onChange:function(e){var t=e.target;return p(t.value)},variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(we.a,{required:!0,id:"outlined-password-input",label:"Password",name:"password",type:"password",value:v,onChange:function(e){var t=e.target;return g(t.value)},variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(we.a,{required:!0,id:"outlined-password-input",label:"Admin Pin",name:"adminPin",type:"password",value:O,onChange:function(e){var t=e.target;return w(t.value)},variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(R.a,{type:"submit",color:"primary"},"Submit"),r.a.createElement("br",null),r.a.createElement(R.a,{onClick:function(e){e.preventDefault(),k.push("/")},color:"secondary"},"Cancel"),r.a.createElement("br",null)))},Je=Object(U.a)({root:{borderStyle:"solid",borderRadius:"1%",borderWidth:"4px",margin:"2%",paddingTop:"2%",paddingBottom:"2%"},header:{textAlign:"center"},form:{display:"grid",width:"25vmax",margin:"auto"}}),Ye=function(){var e=Object(n.useState)(""),t=Object(I.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),u=Object(I.a)(i,2),s=u[0],p=u[1],f=Object(n.useState)(""),b=Object(I.a)(f,2),v=b[0],g=b[1],h=Object(n.useState)(""),E=Object(I.a)(h,2),O=E[0],w=E[1],j=Je(),y=Object(l.f)(),x=Object(o.b)(),k=Object(o.c)((function(e){return e.logged}));Object(n.useEffect)((function(){x(Ne())}),[x,k]);var S=Object(o.c)((function(e){return e.user}));if(console.log("Editing user: ",S),!S)return null;var C=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,x(De({name:a,email:s,password:v,adminPin:O}));case 3:c(""),p(""),g(""),w(""),y.push("/");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:j.root},r.a.createElement("h3",{className:j.header},"Editing ",S.name),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:C,className:j.form},r.a.createElement(we.a,{required:!0,id:"outlined-required",label:"Name",name:"name",value:a,onChange:function(e){var t=e.target;return c(t.value)},variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(we.a,{required:!0,id:"outlined-required",label:"Email",name:"email",value:s,onChange:function(e){var t=e.target;return p(t.value)},variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(we.a,{required:!0,id:"outlined-password-input",label:"Password",name:"password",type:"password",value:v,onChange:function(e){var t=e.target;return g(t.value)},variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(we.a,{required:!0,id:"outlined-password-input",label:"Admin Pin",name:"adminPin",type:"password",value:O,onChange:function(e){var t=e.target;return w(t.value)},variant:"outlined"}),r.a.createElement("br",null),r.a.createElement(R.a,{type:"submit",color:"primary"},"Submit"),r.a.createElement("br",null),r.a.createElement(R.a,{onClick:function(e){e.preventDefault(),y.push("/dashboard")},color:"secondary"},"Cancel"),r.a.createElement("br",null)))},Ve=a(241),He=a(245),Ke=function(e){return r.a.createElement(Ve.a,Object.assign({elevation:6,variant:"filled"},e))},Qe=Object(U.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),Xe=function(){var e=Object(o.c)((function(e){return e.notification})),t=Qe();return e?r.a.createElement("div",{className:t.root},r.a.createElement(He.a,{open:!0},r.a.createElement(Ke,{severity:e.category},e.data))):null},Ze=Object(U.a)({form:{display:"inline"},input:{color:"white"}}),$e=function(){var e=Object(n.useState)(""),t=Object(I.a)(e,2),a=t[0],c=t[1],i=Ze(),u=Object(o.b)(),s=Object(l.f)(),p=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),u(he(a)),c(""),s.push("/dashboard");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:p,className:i.form},r.a.createElement(xe.a,{name:"adminPin",type:"password",size:"small",color:"secondary",className:i.input,value:a,onChange:function(e){var t=e.target;return c(t.value)}})))},et=Object(U.a)({root:{},button:{fontSize:"calc(7px + 0.5vmin)"}}),tt=function(){var e=et(),t=Object(l.f)(),a=Object(o.b)(),c=Object(o.c)((function(e){return e.logged})),i=Object(n.useState)(!1),u=Object(I.a)(i,2),s=u[0],p=u[1],f=function(){var e=Object(d.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,a(Ee());case 3:return e.next=5,a(ge());case 5:p(!1),t.push("/");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){t.push("/login")},v=function(e){e.preventDefault(),a(Ee()),p(!1),t.push("/")},g=function(){p(!s)},h=function(e){e.preventDefault(),t.push("/dashboard")},E=function(){t.push("/join")};return r.a.createElement("div",null,c?"user"===c.role?r.a.createElement(r.a.Fragment,null,s?r.a.createElement(r.a.Fragment,null,r.a.createElement($e,null),r.a.createElement(R.a,{className:e.button,color:"inherit",size:"small",onClick:g},"Cancel")):r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{className:e.button,color:"inherit",size:"small",onClick:g},"Switch to Admin"),r.a.createElement(R.a,{className:e.button,color:"inherit",size:"small",onClick:f},"Logout"))):"admin"===c.role?r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{className:e.button,color:"inherit",size:"small",onClick:v},"User Mode"),r.a.createElement(R.a,{className:e.button,color:"inherit",size:"small",onClick:h},"Dashboard"),r.a.createElement(R.a,{className:e.button,color:"inherit",size:"small",onClick:f},"Logout")):void 0:r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{className:e.button,size:"small",onClick:b,color:"inherit"},"Login"),r.a.createElement(R.a,{className:e.button,color:"inherit",size:"small",onClick:E},"Join")))},at=a(236),nt=a(237),rt=a(238),ct=a(63),it=a(111),ot=a.n(it),ut=Object(U.a)((function(e){return{root:{position:"relative",marginBottom:"2%"},appBar:{position:"relative",backgroundColor:"#282c34",flexGrow:"1",fontSize:"calc(8px + 1vmin)",height:"6.5vh",boxShadow:"none",padding:"1%"},toolbar:{display:"flex",color:"white",paddingLeft:"3vw",minHeight:"100%"},menuButton:{position:"relative",backgroundColor:"#282c34",color:"white",height:"6.5vh",borderRadius:"10%",padding:"1%"},title:{flexGrow:".90"}}})),lt=function(){var e=Object(n.useState)(!1),t=Object(I.a)(e,2),a=t[0],c=t[1],i=ut(),o=Object(l.f)();return r.a.createElement(at.a,{onClickAway:function(){c(!1)}},r.a.createElement("div",{className:i.root},a?r.a.createElement(nt.a,{color:"transparent",className:i.appBar},r.a.createElement(rt.a,{disableGutters:!0,className:i.toolbar},r.a.createElement(ct.a,{variant:"inherit",className:i.title},r.a.createElement("h3",{onClick:function(){o.push("/")}},"Rating App")),r.a.createElement(tt,null))):r.a.createElement(ee.a,{type:"button",color:"inherit",onClick:function(){c((function(e){return!e}))},className:i.menuButton},r.a.createElement(ot.a,null))))},st=a(239),mt=function(){var e=Object(o.b)();Object(n.useEffect)((function(){e(function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v(),e.next=3,t(be(a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]);var t=Object(o.c)((function(e){return e.logged}));return console.log("APP Logged: ",t),r.a.createElement("div",{className:"App"},r.a.createElement(lt,null),r.a.createElement(st.a,{maxWidth:!1,className:"Content"},r.a.createElement(Xe,null),r.a.createElement(l.c,null,r.a.createElement(l.a,{path:"/addItem/"},r.a.createElement(Se,null)),r.a.createElement(l.a,{path:"/login"},r.a.createElement(ye,null)),r.a.createElement(l.a,{path:"/join"},r.a.createElement(_e,null)),r.a.createElement(l.a,{path:"/edit/:id"},r.a.createElement(Fe,null)),r.a.createElement(l.a,{path:"/dashboard"},r.a.createElement(Pe,null)),r.a.createElement(l.a,{path:"/editUser"},r.a.createElement(Ye,null)),r.a.createElement(l.a,{path:"/item/:id"},r.a.createElement(pe,null)),r.a.createElement(l.a,{path:"/"},r.a.createElement(H,null)))))},dt=a(41),pt=a(112),ft=a(113),bt=Object(dt.combineReducers)({items:D,logged:Oe,user:Ie,notification:x}),vt=Object(dt.createStore)(bt,Object(pt.composeWithDevTools)(Object(dt.applyMiddleware)(ft.a)));i.a.render(r.a.createElement(o.a,{store:vt},r.a.createElement(u.a,null,r.a.createElement(mt,null))),document.getElementById("root"))}},[[121,1,2]]]);
//# sourceMappingURL=main.8979a2e6.chunk.js.map